{# Template for processing quest observations and choices - with reasoning #}
Current observation:
{{ observation }}

Available actions:
{% for choice in choices %}
{{ loop.index }}. {{ choice.text }}
{% endfor %}

Take a deep breath and solve this step by step:

1. Analyze the current situation:
   - What is the current state and goal?
   - What are the key constraints and rules?
   - What have we learned about the entities involved?
   - What time or resource limits exist?

2. Track and update your knowledge:
   - What new information was revealed?
   - How does it relate to previously known facts?
   - What patterns or relationships can be identified?
   - What is the current progress toward the goal?

3. Evaluate your options:
   - What are the immediate consequences of each choice?
   - How does each choice affect the remaining possibilities?
   - Which choice best aligns with the optimal solution path?
   - Consider both immediate and long-term implications

Your answer should be in the following format:

```json
{
    "action": <action_number>,
    "state_analysis": "<brief analysis of current state, entities, and constraints>",
    "knowledge_update": "<what new information was learned and how it affects the solution>",
    "goal": "<immediate objective>",
    "reasoning": "<detailed explanation of your choice, including resource management and future implications>"
}
```

Please respond with the JSON object only, nothing else.